(this.webpackJsonpscheduler_front_end=this.webpackJsonpscheduler_front_end||[]).push([[0],{62:function(e,t,a){e.exports=a(92)},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),u=a(3),l=a(6),s=a.n(l),i=a(12),p=a(13),m=a.n(p),b="".concat("","/api/user/login"),d=a(23),E=a(8),f=a(15),v=a(122),g=function(e,t){if(e&&""!==e)return r.a.createElement(v.a,{severity:"error"},t(e))};var O=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.login.errorCode})),a=Object(E.g)(),c=Object(n.useState)(""),o=Object(f.a)(c,2),l=o[0],p=o[1],d=Object(n.useState)(""),v=Object(f.a)(d,2),O=v[0],h=v[1];return r.a.createElement("div",null,g(t,(function(e){switch(e){case"INVALID_EMAIL_OR_PASS":return"The email or password appear to be incorrect.";default:return""}})),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e(function(e,t){return function(){var a=Object(i.a)(s.a.mark((function a(n){var r,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.a.post(b,{email:e,password:t});case 3:r=a.sent,c=r.data,localStorage.setItem("token",c.token),n({type:"LOGIN",data:{email:c.email,token:c.token}}),a.next=18;break;case 9:a.prev=9,a.t0=a.catch(0),a.t1=a.t0.response.status,a.next=401===a.t1?14:16;break;case 14:return n({type:"LOGIN_ERROR",data:{errorCode:a.t0.response.data.errorCode}}),a.abrupt("break",18);case 16:return n({type:"SERVER_ERROR"}),a.abrupt("break",18);case 18:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(l,O)),a.push("/"),h(""),p("")}},"email: ",r.a.createElement("input",{type:"email",value:l,onChange:function(e){p(e.target.value)}})," ",r.a.createElement("br",null),"password: ",r.a.createElement("input",{type:"password",value:O,onChange:function(e){h(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit"})))},h="".concat("","/api/user"),R=function(e){return function(){var t=Object(i.a)(s.a.mark((function t(a){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.get(h,{headers:{authorization:"bearer ".concat(e)}});case 3:n=t.sent,r=n.data,a({type:"USER_INFORMATION",data:{user:r}}),t.next=18;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.response.status),t.t1=t.t0.response.status,t.next=401===t.t1?14:16;break;case 14:return a({type:"INVALID_TOKEN"}),t.abrupt("break",18);case 16:return a({type:"SERVER_ERROR"}),t.abrupt("break",18);case 18:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()};var y=function(){var e=Object(u.c)((function(e){return e.user.user})),t=Object(u.c)((function(e){return e.user.roles})),a=Object(u.c)((function(e){return e.login.token})),c=Object(u.b)();return Object(n.useEffect)((function(){c(R(a))}),[c,a]),e?r.a.createElement("div",null,"Email: ",e.email,r.a.createElement("hr",null),"Hallo ",e.frontName," ",e.lastName,",",r.a.createElement("br",null),"je rollen zijn",t?function(e){var t=e.map((function(e){return r.a.createElement("li",{key:e.id},e.abreviation," (",e.description,")")}));return r.a.createElement("ul",null,t)}(t):" loading"):r.a.createElement("div",null,"Loading....")},k="".concat("","/api/moderator"),_="".concat("","/api/role"),I=function(){return function(){var e=Object(i.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat(_));case 3:a=e.sent,n=a.data,t({type:"ROLE_LIST",data:{roles:n}}),e.next=18;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.status),e.t1=e.t0.response.status,e.next=401===e.t1?14:16;break;case 14:return t({type:"INVALID_TOKEN"}),e.abrupt("break",18);case 16:return t({type:"SERVER_ERROR"}),e.abrupt("break",18);case 18:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()};a(90);var j=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.login.token})),a=Object(n.useState)(""),c=Object(f.a)(a,2),o=c[0],l=c[1],p=Object(n.useState)(""),b=Object(f.a)(p,2),d=b[0],E=b[1],v=Object(n.useState)(""),g=Object(f.a)(v,2),O=g[0],h=g[1];return r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e(function(e,t,a,n){return function(){var r=Object(i.a)(s.a.mark((function r(c){var o,u;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,m.a.post("".concat(k,"/addUser"),{email:t,frontName:a,lastName:n},{headers:{authorization:"bearer ".concat(e)}});case 3:o=r.sent,u=o.data,c({type:"ADD_USER",data:{user:u}}),r.next=20;break;case 8:r.prev=8,r.t0=r.catch(0),console.log(r.t0.response.data),r.t1=r.t0.response.status,r.next=400===r.t1?14:401===r.t1?16:18;break;case 14:return c({type:"VALIDATION_ERROR_ADD_USER",data:r.t0.response.data}),r.abrupt("break",20);case 16:return c({type:"INVALID_TOKEN"}),r.abrupt("break",20);case 18:return c({type:"SERVER_ERROR"}),r.abrupt("break",20);case 20:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()}(t,o,d,O)),E(""),h(""),l("")}},"email: ",r.a.createElement("input",{type:"email",value:o,onChange:function(e){l(e.target.value)}})," ",r.a.createElement("br",null),"front name: ",r.a.createElement("input",{type:"text",value:d,onChange:function(e){E(e.target.value)}}),r.a.createElement("br",null),"last name  ",r.a.createElement("input",{type:"text",value:O,onChange:function(e){h(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit"}))};var T=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.login.token})),a=Object(n.useState)(""),c=Object(f.a)(a,2),o=c[0],l=c[1],p=Object(n.useState)(""),b=Object(f.a)(p,2),d=b[0],E=b[1];return r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e(function(e,t,a){return function(){var n=Object(i.a)(s.a.mark((function n(r){var c,o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.post("".concat(k,"/addRole"),{abreviation:t,description:a},{headers:{authorization:"bearer ".concat(e)}});case 3:c=n.sent,o=c.data,console.log("addRole",o),r({type:"ADD_ROLE",data:{role:o}}),n.next=20;break;case 9:n.prev=9,n.t0=n.catch(0),n.t1=n.t0.response.status,n.next=400===n.t1?14:401===n.t1?16:18;break;case 14:return r({type:"VALIDATION_ERROR_ADD_ROLE",data:n.t0.response.data}),n.abrupt("break",20);case 16:return r({type:"INVALID_TOKEN"}),n.abrupt("break",20);case 18:return r({type:"SERVER_ERROR"}),n.abrupt("break",20);case 20:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,o,d)),l(""),E("")}},"abreviation: ",r.a.createElement("input",{type:"text",value:o,onChange:function(e){l(e.target.value)}})," ",r.a.createElement("br",null),"description: ",r.a.createElement("input",{type:"text",value:d,onChange:function(e){E(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit"}))};var S=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.moderator})),a=Object(u.c)((function(e){return e.login.token})),c=Object(u.c)((function(e){return e.roles}));return Object(n.useEffect)((function(){a&&(e(function(e){return function(){var t=Object(i.a)(s.a.mark((function t(a){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.get("".concat(k,"/users"),{headers:{authorization:"bearer ".concat(e)}});case 3:n=t.sent,r=n.data,a({type:"USERS_LIST",data:{userList:r}}),t.next=18;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.response.status),t.t1=t.t0.response.status,t.next=401===t.t1?14:16;break;case 14:return a({type:"INVALID_TOKEN"}),t.abrupt("break",18);case 16:return a({type:"SERVER_ERROR"}),t.abrupt("break",18);case 18:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(a)),e(I()))}),[e,a]),t&&c?r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"front name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"roles"))),r.a.createElement("tbody",null,t.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.frontName),r.a.createElement("td",null,t.lastName),r.a.createElement("td",null,t.email),r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.roles.map((function(e){return r.a.createElement("div",{key:e},(t=c,a=e,t.filter((function(e){return e.id===a}))[0]).abreviation);var t,a}))),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e(function(e,t){return function(){var a=Object(i.a)(s.a.mark((function a(n){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.a.post("".concat(k,"/deleteUser"),{userId:t},{headers:{authorization:"bearer ".concat(e)}});case 3:n({type:"DELETE_USER_SUCCES"}),a.next=18;break;case 6:a.prev=6,a.t0=a.catch(0),console.log(a.t0.response.data),a.t1=a.t0.response.status,a.next=400===a.t1?12:401===a.t1?14:16;break;case 12:return n({type:"VALIDATION_ERROR_ADD_USER",data:a.t0.response.data}),a.abrupt("break",18);case 14:return n({type:"INVALID_TOKEN"}),a.abrupt("break",18);case 16:return n({type:"SERVER_ERROR"}),a.abrupt("break",18);case 18:case"end":return a.stop()}}),a,null,[[0,6]])})));return function(e){return a.apply(this,arguments)}}()}(a,t.id))}},"Delete User")),r.a.createElement("td",null,r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"dropbtn"},"Dropdown"),r.a.createElement("div",{className:"dropdown-content"},c.map((function(n){return r.a.createElement("button",{key:n.id,onClick:function(){return e(function(e,t,a){return function(){var n=Object(i.a)(s.a.mark((function n(r){var c,o,u;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("lamo"),n.prev=1,n.next=4,m.a.post("".concat(k,"/toggleRole"),{roleId:t,userId:a},{headers:{authorization:"bearer ".concat(e)}});case 4:c=n.sent,o=c.data.role,u=c.data.user,console.log("addRole",c.data),r({type:"TOGGLE_ROLE",data:{user:u,role:o}}),n.next=26;break;case 11:if(n.prev=11,n.t0=n.catch(1),console.log(n.t0),n.t0.response){n.next=17;break}return r({type:"WEIRD_ERROR"}),n.abrupt("return");case 17:n.t1=n.t0.response.status,n.next=400===n.t1?20:401===n.t1?22:24;break;case 20:return r({type:"VALIDATION_ERROR_ADD_ROLE",data:n.t0.response.data}),n.abrupt("break",26);case 22:return r({type:"INVALID_TOKEN"}),n.abrupt("break",26);case 24:return r({type:"SERVER_ERROR"}),n.abrupt("break",26);case 26:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()}(a,n.id,t.id))}},n.abreviation)}))))))})))),r.a.createElement(j,null),r.a.createElement(T,null)):r.a.createElement("div",null)};var D=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.login.token}));return Object(n.useEffect)((function(){e(R(t))}),[e,t]),r.a.createElement("div",null,r.a.createElement(y,null),r.a.createElement(S,null))};var N=function(){var e=Object(u.b)(),t=Object(E.g)();return Object(n.useEffect)((function(){e((localStorage.clear(),{type:"LOGOUT"})),t.push("/")}),[e,t]),r.a.createElement("div",null,"logout")},L="".concat("","/api/timeslot");function x(e){return e<10?"0"+e:e}var w=function(e,t){var a=["January","February","March","April","May","June","July","August","September","October","November","December"];return M(e)===M(t)?"".concat(x(e.getHours()),":").concat(x(e.getMinutes()),"-").concat(x(t.getHours()),":").concat(x(t.getMinutes())," ").concat(a[e.getMonth()],", ").concat(e.getDate()," ").concat(e.getFullYear()):e.getFullYear()===t.getFullYear()?"".concat(a[e.getMonth()],", ").concat(e.getDate()," ").concat(x(e.getHours()),":").concat(x(e.getMinutes()),"-").concat(a[t.getMonth()],", ").concat(t.getDate()," ").concat(x(t.getHours()),":").concat(x(t.getMinutes())):"".concat(a[e.getMonth()],", ").concat(e.getDate()," ").concat(e.getFullYear(),", ").concat(x(e.getHours()),":").concat(x(e.getMinutes()),"-").concat(a[t.getMonth()],", ").concat(t.getDate()," ").concat(t.getFullYear(),", ").concat(x(t.getHours()),":").concat(x(t.getMinutes()))},M=function(e){return"".concat(e.getFullYear(),"-").concat(x(e.getMonth()+1),"-").concat(x(e.getDate()))},C=function(e){return"".concat(x(e.getHours()),":").concat(x(e.getMinutes()))};var A=function(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(new Date),l=Object(f.a)(o,2),p=l[0],b=l[1],d=Object(n.useState)(new Date),E=Object(f.a)(d,2),O=E[0],h=E[1],R=Object(n.useState)(1),y=Object(f.a)(R,2),k=y[0],_=y[1],j=Object(n.useState)([]),T=Object(f.a)(j,2),S=T[0],D=T[1],N=Object(u.c)((function(e){return e.login.token})),x=Object(u.c)((function(e){return e.roles})),w=Object(u.c)((function(e){return e.timeslot.errorCode})),A=Object(u.c)((function(e){return e.timeslot.succes})),V=Object(u.b)();Object(n.useEffect)((function(){console.log("reload roles"),V(I())}),[V]);var U=M(p),z=C(p),K=M(O),F=C(O);return console.log(w),x?r.a.createElement("div",null,g(w,(function(e){switch(e){case"NOT_AUTHORIZED":return"You are not not authorized to create timeslot";default:return""}})),function(e){if(e)return r.a.createElement(v.a,{severity:"success"},"This is a success alert \u2014 check it out!")}(A),r.a.createElement("form",{onSubmit:function(e){console.log(p),V(function(e,t,a,n,r,c){return function(){var o=Object(i.a)(s.a.mark((function o(u){var l,i;return s.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,m.a.post("".concat(L),{description:t,startTime:a,endTime:n,maxPeople:r,roles:c},{headers:{authorization:"bearer ".concat(e)}});case 3:l=o.sent,i=l.data,setInterval((function(){u({type:"RESET_SUCCES_TIMESLOT"})}),5e3),u({type:"ADD_TIMESLOT",data:{timeslot:i}}),o.next=21;break;case 9:o.prev=9,o.t0=o.catch(0),console.log(o.t0),o.t1=o.t0.response.status,o.next=400===o.t1?15:401===o.t1?17:19;break;case 15:case 17:return u({type:"TIMESLOT_ERROR",data:{errorCode:o.t0.response.data.errorCode}}),o.abrupt("break",21);case 19:return u({type:"SERVER_ERROR"}),o.abrupt("break",21);case 21:case"end":return o.stop()}}),o,null,[[0,9]])})));return function(e){return o.apply(this,arguments)}}()}(N,a,p,O,k,S)),e.preventDefault()}},"description: ",r.a.createElement("input",{type:"text",value:a,onChange:function(e){c(e.target.value)}})," ",r.a.createElement("br",null),"startTime date: ",r.a.createElement("input",{type:"date",value:U,onChange:function(e){var t=e.target.value.split("-"),a=new Date(p.getTime());""!==e.target.value&&(a.setFullYear(t[0]),a.setMonth(t[1]-1),a.setDate(t[2]),console.log(a),b(a))}}),"startTime time: ",r.a.createElement("input",{type:"time",value:z,onChange:function(e){var t=e.target.value.split(":"),a=new Date(p.getTime());""!==e.target.value&&(console.log(t,e.target.value,"testing"),a.setHours(t[0]),a.setMinutes(t[1]),b(a))}}),r.a.createElement("br",null),"endTime date: ",r.a.createElement("input",{type:"date",value:K,onChange:function(e){var t=e.target.value.split("-"),a=new Date(O.getTime());""!==e.target.value&&(a.setFullYear(t[0]),a.setMonth(t[1]-1),a.setDate(t[2]),h(a))}}),"endTime time: ",r.a.createElement("input",{type:"time",value:F,onChange:function(e){var t=e.target.value.split(":"),a=new Date(O.getTime());""!==e.target.value&&(a.setHours(t[0]),a.setMinutes(t[1]),h(a))}}),r.a.createElement("br",null),"maxPeople: ",r.a.createElement("input",{type:"number",value:k,onChange:function(e){_(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("select",{value:S,onChange:function(e){var t=e.target.value;S.includes(t)?(console.log("lmao"),D(S.filter((function(e){return e!==t})))):D(S.concat(e.target.value))},multiple:!0},x.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.abreviation,": ",e.description)}))),r.a.createElement("input",{type:"submit"}))):r.a.createElement("div",null,"loading roles")},V=a(113),U=a(114),z=a(115),K=a(116),F=a(117),G=a(25),H=a(118),Y=a(123),B=a(119),J=a(120),P=a(121),q=a(94),W=function(e,t){for(var a in e)if(e[a].abreviation===t)return!0;return!1};var Z=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.timeslot.timeslots})),a=Object(u.c)((function(e){return e.roles})),c=Object(u.c)((function(e){return e.user.roles})),o=Object(u.c)((function(e){return e.timeslot.errorCode})),l=Object(u.c)((function(e){return e.login.token})),p=Object(V.a)((function(e){return{root:{width:400,height:200}}}))();Object(n.useEffect)((function(){l&&(e(function(e){return function(){var t=Object(i.a)(s.a.mark((function t(a){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.get("".concat(L),{headers:{authorization:"bearer ".concat(e)}});case 3:n=t.sent,r=n.data,a({type:"TIMESLOT_LIST",data:{timeslots:r}}),t.next=20;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.response.data),t.t1=t.t0.response.status,t.next=400===t.t1?14:401===t.t1?16:18;break;case 14:return a({type:"VALIDATION_ERROR_TIMESLOT",data:t.t0.response.data}),t.abrupt("break",20);case 16:return a({type:"INVALID_TOKEN"}),t.abrupt("break",20);case 18:return a({type:"SERVER_ERROR"}),t.abrupt("break",20);case 20:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(l)),e(I()),e(R(l)))}),[e,l]);var b=function(e,t){return e.filter((function(e){return e.id===t}))[0]};return t&&0!==a.length?r.a.createElement("div",null,g(o,(function(e){switch(e){case"TIMESLOT_FULL":return"time slot full please fuck off";case"NO_VALID_ROLE":return"you do not have the required role to subscribe to this timeslot please contact the moderator if you think this is an error.";default:return r.a.createElement("div",null)}})),function(t,a){return r.a.createElement(U.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},t.map((function(t){var n=new Date(t.startTime),o=new Date(t.endTime);return r.a.createElement(z.a,{key:t.id},r.a.createElement(K.a,{title:w(n,o),subheader:t.description,className:p.root}),r.a.createElement(F.a,null,r.a.createElement(U.a,{container:!0,spacing:2},r.a.createElement(U.a,{item:!0,xs:12,md:6},r.a.createElement(G.a,{variant:"h6",className:p.title},"Roles"),r.a.createElement(H.a,{dense:!0},t.roles.map((function(e){var t=b(a,e);return r.a.createElement(Y.a,{key:e},r.a.createElement(B.a,{primary:t.abreviation}))})))),r.a.createElement(U.a,{item:!0,xs:12,md:6},r.a.createElement(G.a,{variant:"h6",className:p.title},"Users"),r.a.createElement(H.a,{dense:!0},t.subscribed.map((function(e){return r.a.createElement(Y.a,{key:e},r.a.createElement(B.a,{primary:e}))}))))),r.a.createElement(G.a,{variant:"body2",color:"textSecondary",component:"p"},"".concat(t.subscribed.length,"/").concat(t.maxPeople),r.a.createElement("br",null))),r.a.createElement(J.a,null,r.a.createElement(P.a,null,r.a.createElement(q.a,{onDoubleClick:function(){return e(function(e,t){return function(){var a=Object(i.a)(s.a.mark((function a(n){var r,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.a.post("".concat(L,"/subscribe"),{timeslotId:t},{headers:{authorization:"bearer ".concat(e)}});case 3:r=a.sent,c=r.data,n({type:"SUBSCRIBED_TIMESLOT",data:{timeslot:c}}),a.next=20;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0.response.data),a.t1=a.t0.response.status,a.next=400===a.t1?14:401===a.t1?16:18;break;case 14:return n({type:"TIMESLOT_ERROR",data:a.t0.response.data}),a.abrupt("break",20);case 16:return n({type:"INVALID_TOKEN"}),a.abrupt("break",20);case 18:return n({type:"SERVER_ERROR"}),a.abrupt("break",20);case 20:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(l,t.id))},color:"primary"},"Meld mij aan"),r.a.createElement(q.a,{onDoubleClick:function(){return e(function(e,t){return function(){var a=Object(i.a)(s.a.mark((function a(n){var r,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.a.post("".concat(L,"/unsubscribe"),{timeslotId:t},{headers:{authorization:"bearer ".concat(e)}});case 3:r=a.sent,c=r.data,n({type:"SUBSCRIBED_TIMESLOT",data:{timeslot:c}}),a.next=20;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0),a.t1=a.t0.response.status,a.next=400===a.t1?14:401===a.t1?16:18;break;case 14:return n({type:"TIMESLOT_ERROR",data:a.t0.response.data}),a.abrupt("break",20);case 16:return n({type:"INVALID_TOKEN"}),a.abrupt("break",20);case 18:return n({type:"SERVER_ERROR"}),a.abrupt("break",20);case 20:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(l,t.id))},color:"secondary"},"unSubscribe"),W(c,"createTimeslots")?r.a.createElement(q.a,{onDoubleClick:function(){return e(function(e,t){return function(){var a=Object(i.a)(s.a.mark((function a(n){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.a.post("".concat(L,"/delete"),{timeslotId:t},{headers:{authorization:"bearer ".concat(e)}});case 3:n({type:"DELETE_TIMESLOT",data:{timeslotId:t}}),a.next=18;break;case 6:a.prev=6,a.t0=a.catch(0),console.log(a.t0),a.t1=a.t0.response.status,a.next=400===a.t1?12:401===a.t1?14:16;break;case 12:return n({type:"TIMESLOT_ERROR",data:a.t0.response.data}),a.abrupt("break",18);case 14:return n({type:"INVALID_TOKEN"}),a.abrupt("break",18);case 16:return n({type:"SERVER_ERROR"}),a.abrupt("break",18);case 18:case"end":return a.stop()}}),a,null,[[0,6]])})));return function(e){return a.apply(this,arguments)}}()}(l,t.id))},color:"secondary"},"delete"):"")))})))}(t,a)):r.a.createElement("div",null)};a(91);var Q=function(){var e=Object(u.c)((function(e){return e.login})),t=Object(u.c)((function(e){return e.user.roles})),a=Object(u.c)((function(e){return e.login.token})),c=Object(u.b)();return Object(n.useEffect)((function(){a&&c(R(a))}),[c,a]),r.a.createElement("ul",{className:"navbar_list"},r.a.createElement("li",{className:"navbar_list_element"},r.a.createElement(d.b,{to:"/",className:"navbar_link"},"home ")),r.a.createElement("li",{className:"navbar_log_element"}," ",e.loggedIn?r.a.createElement(d.b,{to:"/logout",className:"navbar_link"},"logout"):r.a.createElement(d.b,{to:"/login",className:"navbar_link"},"login")," "),e.loggedIn?function(e){if(W(e,"userModerator"))return r.a.createElement("li",{className:"navbar_list_element"},r.a.createElement(d.b,{to:"/moderator",className:"navbar_link"},"moderator"))}(t):"",e.loggedIn?function(e){if(W(e,"createTimeslots"))return r.a.createElement("li",{className:"navbar_list_element"},r.a.createElement(d.b,{to:"/timeslot/create",className:"navbar_link"},"create Timeslot"))}(t):"",e.loggedIn?r.a.createElement("li",{className:"navbar_list_element"},r.a.createElement(d.b,{to:"/timeslot",className:"navbar_link"},"timeslots")):"")};var X=function(){var e=Object(u.b)();Object(n.useEffect)((function(){var t=localStorage.getItem("token");e(t?function(e){return{type:"LOGIN",data:{token:e}}}(t):(console.log("no storage"),{type:"NO_TOKEN"}))}),[e]);var t=Object(u.c)((function(e){return e.login}));return t.pending?"pending....":(console.log("Production is ","production"),r.a.createElement(d.a,null,r.a.createElement(Q,null),r.a.createElement(E.d,null,r.a.createElement(E.b,{path:"/login",render:function(){return t.loggedIn?r.a.createElement(E.a,{to:"/user"}):r.a.createElement(O,null)}}),r.a.createElement(E.b,{path:"/timeslot/create",render:function(){return t.loggedIn?r.a.createElement(A,null):r.a.createElement(E.a,{to:"/login"})}}),r.a.createElement(E.b,{path:"/timeslot",render:function(){return t.loggedIn?r.a.createElement(Z,null):r.a.createElement(E.a,{to:"/login"})}}),r.a.createElement(E.b,{path:"/moderator",render:function(){return t.loggedIn?r.a.createElement(D,null):r.a.createElement(E.a,{to:"/login"})}}),r.a.createElement(E.b,{path:"/logout"},r.a.createElement(N,null)),r.a.createElement(E.b,{path:"/",render:function(){return t.loggedIn?r.a.createElement(y,null):r.a.createElement(E.a,{to:"/login"})}}))))},$=a(55),ee={loggedIn:!1,pending:!0},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{token:t.data.token,loggedIn:!0,pending:!1};case"NO_TOKEN":return{loggedIn:!1,pending:!1};case"LOGOUT":return{loggedIn:!1,error:!1,pending:!1};case"LOGIN_ERROR":return console.log(t.data),{loggedIn:!1,error:!0,errorCode:t.data.errorCode,pending:!1};case"SERVER_ERROR":return{loggedIn:!1,error:!0,errorMessage:"The server may be down, try again later or try to contract the moderator.",pending:!1};default:return e}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ROLE":return e.concat(t.data.role);case"ROLE_LIST":return t.data.roles;default:return e}},ne={user:null,role:[]},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_INFORMATION":var a=t.data.user;return{user:{email:a.email,frontName:a.frontName,lastName:a.lastName,id:a.id},roles:a.roles};case"LOGOUT":return{user:null,role:[]};default:return e}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_LIST":return t.data.userList;case"ADD_USER":return e.concat(t.data.user);case"TOGGLE_ROLE":var a=e.map((function(e){return console.log(e.id,t.data.user.id),e.id===t.data.user.id?t.data.user:e}));return console.log(a),a;default:return e}},oe=a(28),ue=a(18),le={timeslots:[],errorCode:"",succes:!1},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TIMESLOT":return Object(ue.a)(Object(ue.a)({},e),{},{timeslots:e.timeslots.concat(t.data.timeslot),succes:!0});case"TIMESLOT_LIST":return Object(ue.a)(Object(ue.a)({},e),{},{timeslots:t.data.timeslots});case"SUBSCRIBED_TIMESLOT":var a=e.timeslots.map((function(e){return e.id===t.data.timeslot.id?t.data.timeslot:e}));return Object(ue.a)(Object(ue.a)({},e),{},{timeslots:a,errorCode:""});case"DELETE_TIMESLOT":var n=e.timeslots.filter((function(e){return e.id!==t.data.timeslotId}));return Object(ue.a)(Object(ue.a)({},e),{},{timeslots:n,errorCode:""});case"TIMESLOT_ERROR":return Object(ue.a)(Object(ue.a)({},e),{},{errorCode:t.data.errorCode});case"RESET_SUCCES_TIMESLOT":return Object(ue.a)(Object(ue.a)({},e),{},{succes:!1});default:return e}},ie=Object(oe.d)(Object(oe.c)({login:te,roles:ae,user:re,moderator:ce,timeslot:se}),Object(oe.a)($.a));o.a.render(r.a.createElement(u.a,{store:ie},r.a.createElement(X,null)),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.b6d0a812.chunk.js.map